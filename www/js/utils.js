GC.Core.include("/gc/sm/static/libs/sha1.js");GC.Core.include("/gc/sm/static/libs/md5.js");GC.Core.include("/gc/sm/static/libs/crypto.js");
GC.Utils={week:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),zero:function(a){return 10>a?"0"+a:""+a},formatDate:function(a,b){if(b instanceof Date){a=a.replace("yyyy",b.getFullYear());a=a.replace("MM",GC.Utils.zero(b.getMonth()+1));a=a.replace("dd",GC.Utils.zero(b.getDate()));a=a.replace("HH",GC.Utils.zero(b.getHours()));a=a.replace("mm",GC.Utils.zero(b.getMinutes()));a=a.replace("ss",GC.Utils.zero(b.getSeconds()));a=a.replace("www",GC.Utils.week[b.getDay()]);if(0<=a.indexOf("la"))var c=b.getTime(),d=
(new Date).getTime(),c=c<d-6048E5?GC.Utils.zero(b.getMonth()+1)+"-"+GC.Utils.zero(b.getDate()):c<d-864E5?GC.Utils.week[b.getDay()]:GC.Utils.zero(b.getHours())+":"+GC.Utils.zero(b.getMinutes()),a=a.replace("la",c);return a}return b},format:function(){for(var a=Array.prototype.slice.call(arguments,0),b=a.shift(),c=0;c<a.length;c++)for(var d=RegExp("\\{"+c+"(?:\\:(.+?))?\\}","g");;){var e=d.exec(b);if(e)b=e[1]?b.replace(e[0],GC.Utils.formatDate(e[1],a[c])):b.replace(e[0],a[c]);else break}return b},thousands:function(a,
b,c){var d=[],e=""+a,a="";if(e)for(var f=e.length;0<f;f--)d.push(e[f-1]);else d.push("0");if(b){for(e=[];d.length;)e=e.concat(d.splice(0,3)),d.length&&e.push(b);d=e}b=d.length-1;if(1<d.length&&"0"==d[b]){a+="0";for(b--;0<b&&("0"==d[b]||","==d[b]);)a+=d[b],b--}for(e="";0<=b;)e+=d[b--];c&&(c.zero=a,c.num=e);return e},escapeHtml:function(a){return a.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},escapeUrl:function(a){return escape(a).replace("+").replace("%2b")},date:function(a){if(a instanceof
Date)return a;a=(""+a).split(/\D/);a[1]--;return new Date(Date.UTC.apply(this,a))},ago:function(a,b){var c=parseInt(((new Date).getTime()-GC.Utils.date(a).getTime())/6E4);if(60>c)return 1==c?b("labelMinute"):b("labelMinutes").replace("{time}",c);if(1440>c)return c=parseInt(c/60),1==c?b("labelHour"):b("labelHours").replace("{time}",c);c=parseInt(c/1440);return 1==c?b("labelDay"):b("labelDays").replace("{time}",c)},toGMT:function(a){a&&a instanceof Date||(a=new Date);return new Date(a.getTime()+6E4*
a.getTimezoneOffset())},min:function(a,b){return a<b?a:b},max:function(a,b){return a<b?b:a},sha1:function(a){return Crypto.SHA1(a)},md5:function(a){return hex_md5(a)},HEX:"0123456789abcdef",guid:function(){for(var a="",b=0;32>b;b++)a+=GC.Utils.HEX[parseInt(16*Math.random())];return a},toHex:function(a){return GC.Utils.HEX[a>>4]+GC.Utils.HEX[a&15]},_defaultPort:function(a){switch(a.toLowerCase()){case "https":return 443;case "http":return 80;default:return 0}},parseUrl:function(a){var b=a.match(/^(\w+):\/\/([^\/:]+)(?::(\d+))?(.*)$/),
c={scheme:null,host:null,port:null,path:null,filename:null,query:{},fragment:null};b&&(c.scheme=b[1],c.host=b[2],c.port=b[3]?b[3]:GC.Utils._defaultPort(b[1]),a=b[4]);if(b=a.match(/^(\/[^\?#]*)?(?:\?([^\#]*))?(?:\#(.*))?$/)){c.path=b[1];c.fragment=b[3];if(b[2]){a=b[2].split("&");for(b=0;b<a.length;b++){var d=a[b].indexOf("=");0<d?c.query[a[b].substring(0,d)]=a[b].substring(d+1):a[b]&&(c.query[a[b]]=!0)}}if(b=c.path.match(/.+\/([^\/]*)$/))c.filename=b[1]}return c},copy:function(a,b){for(k in b)a[k]=
b[k];return a},clone:function(a){if(a){if(a instanceof Array){for(var b=[],c=0,d=a.length;c<d;c++)b.push(GC.Utils.clone(a[c]));return b}if(a instanceof Object){b={};for(c in a)b[c]=GC.Utils.clone(a[c]);return b}}return a},_next:function(a){var b=!1;return function(c){if(b)throw"Too many next: "+(c?c:"");b=!0;a(c)}},_iter:function(a,b,c,d){a<b?c(a,GC.Utils._next(function(e){e?d(e):GC.Utils._iter(a+1,b,c,d)}),d):d()},repeat:function(a,b){var c=!1;a(function(d){c||(d?(c=!0,b(d)):GC.Utils.repeat(a,b))},
b)},loop:function(a,b,c){a?GC.Utils._iter(0,a,b,c):c()},loop_a:function(a,b,c){var d=0;if(a)for(var e=0;e<a;e++)b(e,GC.Utils._next(function(b){0>d||(b?(d=-1,c(b)):++d==a&&c())}),function(){0>d||(d=-1,c())});else c()},each:function(a,b,c){GC.Utils.loop(a.length,function(c,e,f){b(a[c],e,f,c)},c)},each_a:function(a,b,c){GC.Utils.loop_a(a.length,function(c,e){b(a[c],e,c)},c)},chain:function(){var a=Array.prototype.slice.call(arguments,0),b=a.pop();if(!(b instanceof Function))throw"Need at least one parameter";
GC.Utils.each(a,function(a,b,e){a(b,e)},b)},merge:function(a,b){for(var c in b)a[c]=b[c];return a},append:function(a,b){for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a}};
